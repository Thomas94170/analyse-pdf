generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Document {
  id            String         @id @default(uuid())
  filename      String
  originalName  String
  url           String
  type          DocumentType   @default(AUTRE)
  status        DocumentStatus @default(IN_PROGRESS)
  textExtracted String?
  createdAt     DateTime       @default(now())
  metadata      Json?
  Income  Income[]
}

model Income {
   id            String         @id @default(uuid())
   month  Int
   year   Int
   amount Float
   documentId String
   document   Document @relation(fields: [documentId], references: [id], onDelete: Cascade)
  createdAt     DateTime       @default(now())

}

enum DocumentType {
  FACTURE
  CERFA
  AUTRE
}

enum DocumentStatus {
  IN_PROGRESS
  VALIDATED
  REJECTED
}
